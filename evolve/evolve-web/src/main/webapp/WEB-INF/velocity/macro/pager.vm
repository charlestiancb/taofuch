##æœ¬é¡µçš„å®éƒ½è¦æ±‚é¡µé¢ä¸­æœ?currPage $totalPage

##pagerLink
##æ ¹æ®é¡µç ç”Ÿæˆé“¾æ¥ï¼Œä¼šæ ¹æ®æ˜¯å¦æ˜¯å½“å‰é¡µé¢æ¥åˆ¤æ–­æ˜¯å¦åŠ æ ·å¼?
#macro(pagerLink $page)
	#if($page == $currPage)
		<strong><a href="#seo("$link.getPagerUrl($page)")" class="now">$page</a></strong>
	#else
		<a href="#seo("$link.getPagerUrl($page)")">$page</a>
	#end
#end

##pager
##å±•ç¤ºåˆ†é¡µä¿¡æ¯çš„å®
##param $index å¯èƒ½é¡µé¢ä¼šè°ƒç”¨å¤šä¸ªå®ï¼Œä¸ºäº†ä¿æŒHTML IDçš„å”¯ä¸?¼Œå¯ä»¥ä¼ é?æ­¤å‚æ•°æ¥åŒºåˆ†
##param $pageCountArr æ¯é¡µæ˜¾ç¤ºæ•°é‡çš„æ•°ç»„ï¼Œé»˜è®¤ä¸º[10,30,50]
#macro(pager $index $pageCountArr)
	#if($currPage > $totalPage || $totalPage <= 1)
		#break
	#end
	<div class="page">
		<div class="fr pageValue">
		#if($currPage > 1)
		#set($prev = $currPage - 1)
    	<span title="ç¿»è‡³ä¸Šä¸€é¡?>
			<a href="#seo("$link.getPagerUrl($math.toInteger($prev))")">ä¸Šä¸€é¡?/a>
    	</span>
		#end
    	#set($start = $currPage - 2)
    	#set($end = $currPage + 4)
    	#if($start < 1)
    		#set($start = 1)
    	#end
    	#if($start > 1)
    		#pagerLink(1)
    		#if($start > 2)
    			..
    		#end
    	#end
    	#if($end > $totalPage)
    		#set($end = $totalPage)
    	#end
    	#foreach($i in [$start..$end])
    		#pagerLink($i)
    	#end
    	#if($end < $totalPage)
    		..
		#end
		#if($currPage < $totalPage)
		#set($prev = $currPage + 1)
		<span title="ç¿»è‡³ä¸‹ä¸€é¡?>
			<a href="#seo("$link.getPagerUrl($math.toInteger($prev))")">ä¸‹ä¸€é¡?/a>
		</span>
		#end
		<form id="pageForm$!index" action="$link.requestPath" style="display:inline">
		#foreach($key in $params.keySet())
		#if($key != "page")
		<input type="hidden" name="$key" value="$params.get($key)" />
		#end
		#end
		å…?span class="red" id="pageCountNumber">$totalPage</span>é¡?
		è·³è‡³ç¬?<input type="text" name="page" id="pageNumInput$!index" class="text w1"/> é¡?<input id="submitPageBtn" class="pageBtn" type="submit" value="ç¡®å®š"/>
		</form>
		<script type="text/javascript">
		/* <![CDATA[ */
		(function(){
  		var form = document.getElementById("pageForm$!index");
  		if(!form){
  			return;
  		}
  		form.onsubmit=function (event){
  			var input = document.getElementById("pageNumInput$!index");
  			var page = parseInt(input.value);
  			if(isNaN(page) || page>$totalPage || page<1){
  				input.value = "1";
  			}else{
  				input.value = page;
  			}
  			if(window.jumpPageCallback$!{index} !== undefined){
  				var e = window.event || event;
  				if ( e.preventDefault ) {
      			e.preventDefault();
      		}
      		e.returnValue = false;
  				jumpPageCallback$!{index}(e.srcElement || e.target);
  			}
  		}
		})();
		/* ]]> */
		</script>
		</div>
    <div class="pageAmount">æ¯é¡µæ˜¾ç¤ºæ•°é‡ï¼?
			#if(!$pageCountArr)
				#set($pageCountArr = [10,30,50])
			#end
			#foreach($pageCount in $pageCountArr)
			<a data-pagehref="$link.getPerPageUrl($pageCount)" href="javascript:void(0);" rel="nofollow" #if($perPage == $pageCount) class="now" #end>$pageCount</a>
			#end
		  <script>
			(function(){
				var links = document.getElementsByTagName("a");
				for(var i=0,len=links.length;i<len;i++){
					var url  = links[i].getAttribute("data-pagehref");
					if(url) {
						links[i].href = url;
					}
				}
			})();
			</script>
    </div>
	</div>
#end

##è·å–åˆ—è¡¨é¡µä¸­æŸä¸€æ¡è®°å½•çš„åºå·ï¼Œä¼šåŠ ä¸Šå‰å‡ é¡µçš„æ•°æ®æ¡æ•°ï¼Œå¦‚ç¬¬äºŒé¡µç¬¬ä¸?¡è®°å½•åºå·ä¸?1
##param $count è®°å½•åœ¨å½“å‰é¡µçš„åºå·ï¼Œä»?å¼?§‹ä¸?ˆ¬å°?foreach.countä¼ è¿›æ¥å³å?
#macro(listIndex $count)
	#set($base = $math.mul($math.sub($currPage,1),$perPage))
	$math.add($base,$count)
#end
